---
title: "BPM"
---


<a href="salary_bpm_col.html">BPM and salary</a>

<a href="clutch_3pt.html">Clutch 3-point shooting, 2014-2019</a>

<b>Biggest year-over-year decline in rORTG:</b>

```{r,echo=FALSE,message=FALSE,warning=FALSE}
library(tidyverse)
library(reactable)
# Loading data
load("tratings.Rdata")

# Transforming data to get 10 largest declines in rORTG
ratings <- tratings_changes_2011_2021 %>% 
  arrange(orating_rel_change) %>% 
  slice(1:10) %>% 
  dplyr::select(team, year, orating, orating_previous, orating_rel_change) %>% 
  mutate_if(is.numeric, round, 1) %>% 
  dplyr::rename(Team = team,
                Season = year,
                `Offensive rating` = orating,
                `Offensive rating (previous season)` = orating_previous,
                `Change in rORTG` = orating_rel_change)

# Functions to handle cell colors copied from: https://glin.github.io/reactable/articles/womens-world-cup/womens-world-cup.html
make_color_pal <- function(colors, bias = 1) {
  get_color <- colorRamp(colors, bias = bias)
  function(x) rgb(get_color(x), maxColorValue = 255)
}

rortg_color <- make_color_pal(c("#ff2700", "#f8fcf8", "#44ab43"), bias = 1.3)

reactable::reactable(
  ratings,
  columns = list(
    `Change in rORTG` = colDef(
      cell = function(value){
        scaled <- 1 - (value - min(ratings$`Change in rORTG`)) / (max(ratings$`Change in rORTG`) - min(ratings$`Change in rORTG`))
        color <- rortg_color(scaled)
      }
    )
  )
  
)
```

